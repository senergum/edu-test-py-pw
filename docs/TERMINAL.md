# Руководство по работе с терминалом: CMD, PowerShell, Unix, Bash

## 1. Термины

- **Терминал** - интерфейс для текстового ввода/вывода (консоль).
- **CMD (Command Prompt)** - командная оболочка Windows.
- **Unix** - семейство операционных систем, включая Linux и macOS.
- **Bash (Bourne Again Shell)** - популярная командная оболочка в Unix-системах.

## 2. Команды

### 2.1. Windows CMD:
<details><summary>==НАЖМИ== Включение</summary><p>

#### Основные способы запуска:
1. **Горячие клавиши**:
   - <kbd>Win</kbd>+<kbd>R</kbd> → ввести `cmd` → нажать <kbd>Enter</kbd>
   - <kbd>Win</kbd>+<kbd>X</kbd> → Выбрать "Командная строка" или "Windows Terminal"
   - В поиске (<kbd>ctrl</kbd>+<kbd>q</kbd>) введите `cmd` или `командная строка` → нажать <kbd>Enter</kbd>
2. **Через меню Пуск**:
   - Наберите "cmd" или "Командная строка" в поиске
   - В проводнике: Shift+ПКМ → "Открыть окно команд"
3. **PowerShell**:
   - В поиске (<kbd>ctrl</kbd>+<kbd>q</kbd>) введите `powershell` → нажать <kbd>Enter</kbd>

#### Альтернативы:
- PowerShell (более мощная оболочка)
- Git Bash (эмуляция Unix-окружения)
- WSL (подсистема Linux для Windows)
</p></details>

<details><summary>==НАЖМИ== Команды CMD</summary><p>

1. Навигация
```cmd
dir                # список файлов и папок
    /A            # показать скрытые/системные файлы
    /O            # сортировка (N-по имени, S-по размеру)
    /T:W          # сортировка по времени изменения
cd путь           # смена директории
    ..           # на уровень выше
chdir             # показать текущий путь (аналог pwd)
pushd путь        # сохранить текущий путь и перейти
popd             # вернуться к сохраненному пути
tree             # показать дерево каталогов
```

2. Работа с файлами и папками
```cmd
mkdir имя_папки    # создать директорию
rmdir /S имя_папки # удалить папку и содержимое
del файл          # удалить файл
    /F           # принудительное удаление
    /Q           # без подтверждения
copy откуда куда  # копирование файлов
xcopy от куда куда /E # копирование папок
move от куда куда # перемещение/переименование
ren старое новое  # переименование
type файл         # просмотр содержимого (аналог cat)
```

3. Поиск
```cmd
find "текст" файл  # поиск текста в файле
findstr "шаблон" файлы # расширенный поиск
    /I            # без учета регистра
    /S            # рекурсивный поиск
where имя_файла   # поиск файла в PATH
```

4. Системная информация
```cmd
systeminfo        # подробная информация о системе
hostname         # имя компьютера
ver              # версия Windows
tasklist         # список процессов
    /M           # показать DLL модули
taskkill /PID номер /F # завершить процесс
ipconfig        # сетевые настройки
    /all        # полная информация
netstat -ano    # сетевые соединения
```

5. Работа с сетью
```cmd
ping хост        # проверка соединения
tracert хост     # трассировка маршрута
nslookup домен   # DNS-запросы
ftp             # FTP-клиент
telnet          # Telnet-клиент
```

6. Управление
```cmd
taskmgr         # диспетчер задач
msconfig        # конфигурация системы
diskpart        # управление дисками
chkdsk          # проверка диска
sfc /scannow    # проверка системных файлов
```

7. Перенаправления
```cmd
команда > файл    # вывод в файл
команда >> файл   # дописать в файл
команда1 | команда2 # передача вывода
more             # постраничный вывод
```

8. Пакетные файлы
```cmd
@echo off       # отключить вывод команд
set переменная=значение # установка переменной
echo %переменная% # вывод переменной
if условие команда # условное выполнение
for %%i in (*.txt) do echo %%i # циклы
goto метка      # переход к метке
:метка          # объявление метки
```

9. Полезные команды
```cmd
cls             # очистить экран
color           # изменить цвет текста/фона
date /T         # текущая дата
time /T         # текущее время
title           # изменить заголовок окна
whoami          # текущий пользователь
```

10. Работа с реестром
```cmd
reg query       # запрос значения
reg add         # добавить значение
reg delete      # удалить значение
reg export      # экспорт ветки
reg import      # импорт ветки
```
</p></details>

<details><summary>==НАЖМИ== Полезные сочетания клавиш</summary><p>

1. Основные:
- <kbd>F3</kbd> - повторить предыдущую команду
- <kbd>F7</kbd> - история команд (выбор стрелками)
- <kbd>F9</kbd> - выполнить команду по номеру из истории
- <kbd>Ctrl</kbd>+<kbd>C</kbd> - прервать команду
- <kbd>Ctrl</kbd>+<kbd>V</kbd> - вставить (в новых версиях Windows 10+)

2. Навигация:
- <kbd>Home</kbd>/<kbd>End</kbd> - в начало/конец строки
- <kbd>Ctrl</kbd>+<kbd>←</kbd>/<kbd>→</kbd> - перемещение по словам
- <kbd>Esc</kbd> - очистить строку

3. В Windows Terminal:
- <kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>T</kbd> - новая вкладка
- <kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>W</kbd> - закрыть вкладку
- <kbd>Alt</kbd>+<kbd>Enter</kbd> - полноэкранный режим
</p></details>

---

### 2.2. Unix/Bash:
<details><summary>==НАЖМИ== Включение</summary><p>

#### Linux:
<!-- Ctrl + Alt + T -->
1. **Горячие клавиши** (работает в большинстве дистрибутивов):
   - Нажми <kbd>**Ctrl**</kbd>**+**<kbd>**Alt**</kbd>**+**<kbd>**T**</kbd>
   - <kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>T</kbd> - новая вкладка в существующем терминале
2. **Через меню приложений**:
   - Открой меню программ → ищи "Terminal", "Konsole" или "XTerm"
   - Или наберите "terminal" в поиске системы
3. **Через TTY** (полноценная консоль без GUI):
   - Нажми <kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd>F1-F6</kbd> (для переключения между виртуальными консолями)
   - Вернуться в графический режим: <kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd>F7</kbd>

#### macOS:
1. **Способ 1**:
   - Открой Finder → "Программы" → "Утилиты" → "Терминал"
2. **Способ 2**:
   - Нажми <kbd>Cmd</kbd>+<kbd>Пробел</kbd> → введи "Terminal" → <kbd>Enter</kbd>
3. **Альтернативы**:
   - iTerm2 (более функциональный сторонний терминал)

#### Windows (WSL/Linux-подсистема):
1. Установи WSL (в PowerShell от админа):
```powershell
wsl --install
wsl --list --online    # показать доступные дистрибутивы
wsl --set-default-version 2  # использовать WSL 2
```
</p></details>

<details><summary>==НАЖМИ== Команды Unix и Bash</summary><p>

1. Навигация
```bash
ls <опции> <путь>                     # список файлов
  -l                                  # подробный формат (права, размер, владелец)
  -a                                  # показать скрытые файлы (включая .файлы)
  -h                                  # человеко-читаемые размеры (вместе с -l)
  -t                                  # сортировка по времени изменения
cd <путь>                             # смена директории
  ~                                   # домашняя директория
  -                                   # предыдущая директория
  ..                                  # на уровень выше
pwd                                   # показать текущий путь
```

2. Директории
```bash
mkdir <опции> <имя>                   # создать директорию
    -p                                # создать родительские директории при необходимости
    -v                                # выводить информацию о создании
rmdir <имя>                           # удалить ПУСТУЮ директорию
rm -r <имя>                           # рекурсивное удаление (файлов и папок)
    -f                                # принудительное удаление без подтверждения
    -i                                # интерактивное подтверждение для каждого файла
cp <опции> <откуда> <куда>            # копирование
    -r                                # рекурсивное копирование директорий
    -v                                # вывод информации о копировании
    -n                                # не перезаписывать существующие файлы
mv <опции> <откуда> <куда>            # перемещение/переименование
    -i                                # запрос подтверждения перед перезаписью
    -v                                # вывод информации о действии
    mv *.txt /target                  # переместить все txt-файлы
```

3. Файлы
```bash
touch <файлы>                         # создать/обновить timestamp
    -a                                # изменить только время доступа
    -m                                # изменить только время модификации
cat <опции> <файлы>                   # объединение и вывод
    -n                    # нумеровать строки
    -s  # сжимать множественные пустые строки
less <файл>              # просмотр с прокруткой
    /текст  # поиск вперёд
    ?текст  # поиск назад
    q       # выход
head <опции> <файл>      # начало файла
    -n N  # показать N строк (по умолчанию 10)
    -c N  # показать N байт
tail <опции> <файл>      # конец файла
    -f   # следить за изменениями в реальном времени
    -n N # показать N последних строк
    
ТЕКСТ:
sort файл            # сортировка строк
uniq файл            # удалить дубликаты (требует предварительной сортировки)
wc файл              # статистика (строки/слова/байты)
    -l              # только строки
    -w              # только слова
    -c              # только байты
```

4. Поиск
```bash
find <путь <критерии> <действия>
    -name "шаблон"  # поиск по имени
    -type f/d       # файлы/директории
    -size +10M      # размер >10MB
    -exec команда {} \; # выполнить команду для найденного
grep <опции> <шаблон> <файлы>
    -i  # игнорировать регистр
    -v  # инвертировать совпадения
    -c  # подсчитать количество совпадений
    -E  # расширенные регулярные выражения
locate <шаблон>        # быстрый поиск по базе
    -i    # игнорировать регистр
    --regexp # использовать regex
```

5. Права
```bash
chmod <опции> <режим> <файлы>
    ugoa  # user/group/others/all
    +-=   # добавить/удалить/установить
    -R    # рекурсивно
    Пример: chmod 24 script.sh
chown <опции> user[:group] <файлы>
    -R  # рекурсивно
    -v  # вывод информации
sudo <команда>         # выполнение от root
    -i  # интерактивный shell
    -u user # выполнить от имени указанного пользователя
    su              # все дальнейшие команды через sudo
whoami               # текущий пользователь
id                   # информация о пользователе и группах
last                 # история входа пользователей
passwd               # изменить пароль
Прочее:
tempfile=$(mktemp /tmp/example.XXXXXX)  # Безопасное создание временных файлов
read -s -p "Password: " passwd  # Чтение паролей
history -c && history -w  # Очистка истории
```

6. Процессы
```bash
ps aux | grep процесс   # поиск процесса
kill -9 PID             # принудительное завершение
pkill имя_процесса      # завершение по имени
команда &               # запуск в фоне
jobs                # список фоновых задач
    -l              # с PID
fg %N               # вернуть процесс на передний план
bg %N               # продолжить в фоне
nohup команда &     # запустить устойчивый к разрыву процесс
disown              # отвязать процесс от сессии

СКРИПТЫ:
#!/bin/bash          # шебанг для bash-скриптов
chmod +x script.sh   # сделать файл исполняемым
./script.sh          # запустить скрипт
```

7. Выход
```bash
exit               # завершить сессию
Ctrl+D             # EOF (аналог exit)
Ctrl+C             # прервать текущую команду
Ctrl+Z             # приостановить процесс
```

8. Архивация
```bash
tar -czvf archive.tar.gz директория  # создать архив
tar -xzvf archive.tar.gz            # распаковать
zip -r archive.zip директория       # создать zip
unzip archive.zip                   # распаковать zip
```

9. Сеть
```bash
ping хост
ssh пользователь@хост
scp файл пользователь@хост:путь
wget URL
curl URL

Утилиты:
ifconfig/ip a        # сетевые интерфейсы
netstat -tulnp       # открытые порты
traceroute хост      # трассировка маршрута
dig домен            # DNS-запросы
```

10. ОСОБЕННОСТИ РАБОТЫ С КОМАНДАМИ:
```bash
Перенаправления:
command > file.txt    # записать вывод в файл
command >> file.txt   # дописать в конец файла
command < file.txt    # читать ввод из файла
command1 | command2   # передать вывод command1 в command2

Цепочки:
команда1 & команда2     # выполнить две команды друг за другом
команда1 && команда2   # выполнить команду2 только если команда1 успешна
команда1 || команда2   # выполнить команду2 только если команда1 неуспешна
команда1 && команда2 || командаd3        # если команда1 успешна → команда2, иначе → команда3

Подстановки:
!$                  # последний аргумент предыдущей команды
!^                  # первый аргумент предыдущей команды
!:2                 # второй аргумент предыдущей команды

# Процессная подстановка
diff <(cmd1) <(cmd2)        # сравнение выводов двух команд
# Массивы и циклы
for file in *.txt; do echo "$file"; done
while read line; do echo "$line"; done < file.txt
# Арифметические операции
echo $((5 + 3))             # вычисления в shell
((count++))                 # инкремент переменной
# Работа с переменными
${var:-default}             # использовать значение или default
${var%.txt}                 # удалить суффикс .txt
${var#prefix}               # удалить prefix
# Регулярные выражения
[[ $string =~ ^[0-9]+$ ]]   # проверка на число
```

11. Система
```bash
df -h              # место на дисках
du -sh директория  # размер директории
free -h            # использование памяти
top/htop           # мониторинг процессов

ДАТА И ВРЕМЯ:
date                 # текущая дата и время
cal                  # календарь
time команда         # замерить время выполнения

ДИСКИ:
lsblk                # информация о блочных устройствах
fdisk -l             # информация о разделах
mount                # список смонтированных файловых систем
df -Th               # место на дисках с типами FS

ЛОГИ:
journalctl -xe       # просмотр системных логов (systemd)
dmesg                # сообщения ядра
tail -f /var/log/syslog # мониторинг системного лога

МОНИТОРИНГ:
uptime               # время работы системы и нагрузка
vmstat 1             # статистика виртуальной памяти (каждую секунду)
iostat               # статистика ввода/вывода
lsof -i :8080        # найти процесс, использующий порт 8080

УПРАВЛЕНИЕ ПАКЕТАМИ:
# Для Debian/Ubuntu:
apt update           # обновить список пакетов
apt upgrade          # обновить установленные пакеты
apt install пакет    # установить пакет
# Для RHEL/CentOS:
yum install пакет
dnf install пакет    # в новых версиях
```

12. Окружение
```bash
env                # список переменных
echo $VAR          # значение переменной
export VAR=значение # установить переменную\

Переменные:
alias ll='ls -la'    # создать алиас
unalias ll           # удалить алиас
env | grep PATH      # найти переменные окружения
history | grep ssh   # поиск в истории команд
```
</p></details>

<details><summary>==НАЖМИ== Полезные сочетания клавиш</summary><p>

### Основные:
* <kbd>Tab</kbd> - автодополнение команд и путей (двойное нажатие показывает варианты)
* <kbd>Ctrl</kbd>+<kbd>C</kbd> - прервать текущую команду (SIGINT)
* <kbd>Ctrl</kbd>+<kbd>D</kbd> - завершить сессию (EOF - End Of File)
* <kbd>Ctrl</kbd>+<kbd>Z</kbd> - приостановить процесс (перевести в фон)

### Навигация:
* <kbd>Ctrl</kbd>+<kbd>A</kbd> - перейти в начало строки
* <kbd>Ctrl</kbd>+<kbd>E</kbd> - перейти в конец строки
* <kbd>Alt</kbd>+<kbd>B</kbd> - назад на одно слово
* <kbd>Alt</kbd>+<kbd>F</kbd> - вперед на одно слово
* <kbd>Ctrl</kbd>+<kbd>U</kbd> - удалить от курсора до начала строки
* <kbd>Ctrl</kbd>+<kbd>K</kbd> - удалить от курсора до конца строки
ПРОЧЕЕ:
* <kbd>Ctrl</kbd>+<kbd>XX</kbd> - переключение между началом строки и текущей позицией
* <kbd>Alt</kbd>+<kbd>T</kbd> - поменять местами текущее и предыдущее слово
* <kbd>Ctrl</kbd>+<kbd>Y</kbd> - вставить последний удаленный текст
* <kbd>Alt</kbd>+<kbd>#</kbd> - закомментировать текущую строку
* <kbd>Ctrl</kbd>+<kbd>X</kbd>+<kbd>E</kbd> - открыть команду в редакторе ($EDITOR)

### История команд:
* <kbd>↑</kbd>/<kbd>↓</kbd> - навигация по истории
* <kbd>Ctrl</kbd>+<kbd>R</kbd> - обратный поиск по истории
* <kbd>Ctrl</kbd>+<kbd>G</kbd> - отменить поиск по истории
* <kbd>!!</kbd> - повторить последнюю команду
* <kbd>!команда</kbd> - выполнить последнюю команду, начинающуюся на "команда"

### Управление процессами:
* <kbd>Ctrl</kbd>+<kbd>L</kbd> - очистить экран (аналог команды `clear`)
* <kbd>Ctrl</kbd>+<kbd>S</kbd> - приостановить вывод
* <kbd>Ctrl</kbd>+<kbd>Q</kbd> - возобновить вывод
* <kbd>Ctrl</kbd>+<kbd>W</kbd> - удалить слово перед курсором
* <kbd>Alt</kbd>+<kbd>.</kbd> - вставить последний аргумент предыдущей команды
</p></details>

---

## 3. Прочее
<details><summary>==НАЖМИ== Основные отличия Windows CMD от Unix/Bash</summary><p>

* Основные отличия Windows CMD от Unix/Bash:
  * Используются разные команды (dir вместо ls, copy вместо cp)
  * Нет чувствительности к регистру в командах
  * Другие параметры команд (через / вместо -)
  * Меньше возможностей для скриптинга
  * Отсутствуют многие Unix-утилиты (grep, find, awk и др.)
  * Перенаправления работают похоже, но с ограничениями

* Для более Unix-подобного опыта в Windows рекомендуется использовать:
  * Windows Subsystem for Linux (WSL)
  * Git Bash
  * Cygwin
  * PowerShell (имеет больше возможностей чем CMD)
</p></details>

---